<div class="row">
  <% Ticket.all.each do |ticket| %>
    <div class="col-md-2 col-sm-4 col-xs-6">
      <%= link_to "/events/#{ticket.event.id}", class: "card m-2 h-100", id: "card-#{ticket.id}" do %>
        <%= image_tag ticket.event.photo, class: "card-image", alt: "Card image", style: "width: 100%" %>
        <div class="card-body">
          <h5 class="card-title text-truncate"><%= ticket.event.artist %></h5>
          <p class="card-price">R$ <%= sprintf("%.2f", ticket.price) %></p>
        </div>
      <% end %> 
    </div>
  <% end %>
</div>

<script>
  var searchInput = document.getElementById('searchInput');
  var cards = document.querySelectorAll('.card');
  var images = document.querySelectorAll('.card-image');

  searchInput.addEventListener('input', filterCards);


  function filterCards() {
    var searchValue = searchInput.value.toLowerCase();

    cards.forEach((card, index) => {
      var cardContent = card.textContent.toLowerCase();
      if (cardContent.includes(searchValue)) {
        card.style.display = 'block';
        images[index].style.display = 'block';
        card.classList.add('visible-card'); // Add CSS class to visible cards
      } else {
        card.style.display = 'none';
        images[index].style.display = 'none';
        card.classList.remove('visible-card'); // Remove CSS class from non-visible cards
      }
    });

    }

</script>
